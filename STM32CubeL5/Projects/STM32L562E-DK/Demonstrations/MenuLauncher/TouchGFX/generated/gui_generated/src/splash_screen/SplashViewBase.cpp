/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/splash_screen/SplashViewBase.hpp>
#include <touchgfx/Color.hpp>
#include "BitmapDatabase.hpp"

SplashViewBase::SplashViewBase() :
    waitInteractionCounter(0),
    fadeInLogoEndedCallback(this, &SplashViewBase::fadeInLogoEndedCallbackHandler)
{
    background.setPosition(0, 0, 240, 240);
    background.setColor(touchgfx::Color::getColorFrom24BitRGB(255, 255, 255));

    st_logo.setXY(35, 57);
    st_logo.setBitmap(touchgfx::Bitmap(BITMAP_ST_LOGO1_ID));
    st_logo.setAlpha(0);

    lifeaugmented.setXY(35, 151);
    lifeaugmented.setVisible(false);
    lifeaugmented.setBitmap(touchgfx::Bitmap(BITMAP_ST_LOGO2_ID));

    add(background);
    add(st_logo);
    add(lifeaugmented);
}

void SplashViewBase::setupScreen()
{

}

//Handles delays
void SplashViewBase::handleTickEvent()
{
    if(waitInteractionCounter > 0)
    {
        waitInteractionCounter--;
        if(waitInteractionCounter == 0)
        {
            //startMenuScreen
            //When WaitInteraction completed change screen to Menu
            //Go to Menu with no screen transition
            application().gotoMenuScreenNoTransition();
        }
    }
}

//Called when the screen is done with transition/load
void SplashViewBase::afterTransition()
{
    //FadeInLogo
    //When screen is entered fade st_logo
    //Fade st_logo to alpha:255 with QuintInOut easing in 1000 ms (60 Ticks)
    st_logo.clearFadeAnimationEndedAction();
    st_logo.startFadeAnimation(255, 60, touchgfx::EasingEquations::quintEaseInOut);
    st_logo.setFadeAnimationEndedAction(fadeInLogoEndedCallback);
}

void SplashViewBase::fadeInLogoEndedCallbackHandler(const touchgfx::FadeAnimator<touchgfx::Image>& comp)
{
    //ShowLifeAugmented
    //When FadeInLogo completed show lifeaugmented
    //Show lifeaugmented
    lifeaugmented.setVisible(true);
    lifeaugmented.invalidate();

    //WaitInteraction
    //When ShowLifeAugmented completed delay
    //Delay for 1000 ms (60 Ticks)
    waitInteractionCounter = WAITINTERACTION_DURATION;
}
